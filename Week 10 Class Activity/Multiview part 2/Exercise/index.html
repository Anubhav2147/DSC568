<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Penguin plot</title>
    <!--Link the barplot and scatter plot to HTML file-->
    <script src="scatterplot.js?2"></script>
    <script src="barplot.js?2"></script>
    <!--<script src="slider.css"></script> -->

    <link rel="stylesheet" href="../styles/style.css" />

<!-- D3 Brush reference -> https://www.d3-graph-gallery.com/graph/interactivity_brush.html -->

    <!-- Toogle button -->
    
    <!-- <link rel = "stylesheet" href = "C:/Users/anubh/Desktop/Course Requisites/Fall 2021/DSC 530/DSC568/Week 10 Class Activity/Multiview part 2/Exercise/bootstrap-toggle-master/bootstrap-toggle-master/css/bootstrap-toggle.css"/>
    <link rel = "stylesheet" href = "C:/Users/anubh/Desktop/Course Requisites/Fall 2021/DSC 530/DSC568/Week 10 Class Activity/Multiview part 2/Exercise/bootstrap-toggle-master/bootstrap-toggle-master/css/bootstrap2-toggle.css"/>
    <link rel = "stylesheet" href = "C:/Users/anubh/Desktop/Course Requisites/Fall 2021/DSC 530/DSC568/Week 10 Class Activity/Multiview part 2/Exercise/bootstrap-toggle-master/bootstrap-toggle-master/css/bootstrap-toggle.min.css"/>
    <link rel = "stylesheet" href = "C:/Users/anubh/Desktop/Course Requisites/Fall 2021/DSC 530/DSC568/Week 10 Class Activity/Multiview part 2/Exercise/bootstrap-toggle-master/bootstrap-toggle-master/css/bootstrap2-toggle.min.css"/> -->
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    
<link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>



<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <style>
      .fig {
        fill: #faf8f8;
      }
      table {
        border: 1px solid #d2bcbc;
        border-collapse: collapse;
      }
      td {
        border: 1px solid #d2bcbc;
        border-collapse: collapse;
        padding: 10px;
        width: 10vw;
      }

      .hidden {

display: none;

}
    </style>
    <script src="../lib/d3.js"></script>
  </head>


<div>

  <h4>press button to continue</h4>
</div>

    <div class="d-grid gap-2" >
    
      <button  onClick="tgtb1()" class="btn btn-primary" type="button" style="width: 800px;position:absolute;padding-left: 80px;padding-right: 80px;">Graph of Anubhav</button>
      <!-- <button class="btn btn-primary" type="button">Button</button> -->
    </div>
  <!-- <button onClick="tgtb1()">Open Graph1</button> -->



<div id = "main">

  <body style="display: flex; flex-direction: row; padding: 20px ;">

    <table style="margin: 5px" id="table1" class="hidden">
      <tr>
        
        <td><svg width="550px" height="150px" id="top1"></svg></td>
        <td width="10%">&nbsp</td>
        
      </tr>
      <tr>
        <td>


          <svg id="dataviz1" style = "margin-left:250px;margin-top:-120px" height=200 width=300> </svg>


          <svg
            width="550px"
            height="500px"
            viewBox="0 0 1100 1000"
            id="main1"
          ></svg>
          
        </td>
        <td><svg width="150px" height="500px" id="right1"></svg></td>
      </tr>
    </table>
    <table style="margin: 5px; width: 600px" id="table2" class="hidden">
      <tr>
        <td><svg width="550px" height="150px" id="top2"></svg></td>
        <td width="10%">&nbsp</td>
      </tr>
      <tr>
        <td>

          <svg id="dataviz" style = "margin-left:250px;margin-top:-120px" height=200 width=300> </svg>

          <svg
            width="550px"
            height="500px"
            viewBox="0 0 1100 1000"
            id="main2"
          ></svg>
        </td>
        <td><svg width="150px" height="500px" id="right2"></svg></td>
      </tr>
    </table>
    <table style="margin: 5px; width: 600px" id="table3" class="hidden">
      <tr>
        <td><svg width="550px" height="150px" id="top3"></svg></td>
        <td width="10%">&nbsp</td>
      </tr>
      <tr>
        <td>

          <svg id="dataviz2" style = "margin-left:250px;margin-top:-120px" height=200 width=300> </svg>

          <svg
            width="550px"
            height="500px"
            viewBox="0 0 1100 1000"
            id="main3"
          ></svg>
        </td>
        <td><svg width="150px" height="500px" id="right3"></svg></td>
      </tr>
    </table>
    <script>
      let palmer_penguin_species = "../data/palmer_penguin_species.tsv";
      // loading data
      d3.tsv(palmer_penguin_species).then(main);

      // Subplots 1
      let fig1_main = d3
        .select("#main1")
        .append("g")
        .append("rect")
        .attr("class", "fig")
        .attr("width", "100%")
        .attr("height", "100%");
      // top svg 1
      let svg_top1 = d3
        .select("#top1")
        .append("g")
        .append("rect")
        .attr("class", "fig")
        .attr("width", "100%")
        .attr("height", "100%");

      // right svg 1
      let svg_right1 = d3
        .select("#right1")
        .append("g")
        .append("rect")
        .attr("class", "fig")
        .attr("width", "100%")
        .attr("height", "100%");

      // Subplots 2

      let svg_main2 = d3
        .select("#main2")
        .append("g")
        .append("rect")
        .attr("class", "fig")
        .attr("width", "100%")
        .attr("height", "100%");


        // Add brushing
d3.select("#main2")
      .call( d3.brush()                 // Add the brush feature using the d3.brush function
        .extent( [ [0,0], [700,700] ] ) // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area
       
      )

      // top svg 2
      let svg_top2 = d3
        .select("#top2")
        .append("g")
        .append("rect")
        .attr("class", "fig")
        .attr("width", "100%")
        .attr("height", "100%");

      // right svg 2
      let svg_right2 = d3
        .select("#right2")
        .append("g")
        .append("rect")
        .attr("class", "fig")
        .attr("width", "100%")
        .attr("height", "100%");

      // Subplots 3

      let svg_main3 = d3
        .select("#main3")
        .append("g")
        .append("rect")
        .attr("class", "fig")
        .attr("width", "100%")
        .attr("height", "100%");
      // top svg 3
      let svg_top3 = d3
        .select("#top3")
        .append("g")
        .append("rect")
        .attr("class", "fig")
        .attr("width", "100%")
        .attr("height", "100%");
      // right svg 3
      let svg_right3 = d3
        .select("#right3")
        .append("g")
        .append("rect")
        .attr("class", "fig")
        .attr("width", "100%")
        .attr("height", "100%");

      function main(data) {
        let spec = d3.map(data, function (d) {
          return d.species;
        });

        let spec_t = new Set(spec);
        const p_specie = [...spec_t];

        var first = [];
        var second = [];
        var third = [];

        data.map((element) => {
          if (element.species === p_specie[0]) {
            first.push(element);
          } else if (element.species === p_specie[1]) {
            second.push(element);
          } else if (element.species === p_specie[2]) {
            third.push(element);
          }
        });

        // Fixing graph positions on the basis of subsetted species

        var dictIsland = {};
        dictIsland[p_specie[0]] = first;
        dictIsland[p_specie[1]] = second;
        dictIsland[p_specie[2]] = third;

        // fetch data from table
        let y1 = d3.map(dictIsland[p_specie[0]], function (d) {
          return +d.culmen_length_mm;
        });
        let x1 = d3.map(dictIsland[p_specie[0]], function (d) {
          return +d.culmen_depth_mm;
        });
        let xy1 = d3.map(dictIsland[p_specie[0]], function (d) {
          return +d.flipper_length_mm;
        });

        let y2 = d3.map(dictIsland[p_specie[1]], function (d) {
          return +d.culmen_length_mm;
        });
        let x2 = d3.map(dictIsland[p_specie[1]], function (d) {
          return +d.culmen_depth_mm;
        });
        let xy2 = d3.map(dictIsland[p_specie[1]], function (d) {
          return +d.flipper_length_mm;
        });

        let y3 = d3.map(dictIsland[p_specie[2]], function (d) {
          return +d.culmen_length_mm;
        });
        let x3 = d3.map(dictIsland[p_specie[2]], function (d) {
          return +d.culmen_depth_mm;
        });
        let xy3 = d3.map(dictIsland[p_specie[2]], function (d) {
          return +d.flipper_length_mm;
        });

       // let iL = ["Torgersen", "Biscoe", "Dream"];

        let island_code = d3.map(dictIsland[p_specie[0]], function (d) {
          island = d.island;
          if (island === "Torgersen") {
            return 0;
          } else if (island === "Dream") {
            return 1;
          } else {
            return 2;
          }
        });

        // main svg
        scatterplot(
          x1,
          y1,
          xy1,
          island_code,
          "main1",
          (title = "Penguin Species"),
          (xLabel = "culmen_depth_mm"),
          (yLabel = "culmen_length_mm")
        );
        //#############
        barplot(x1, 10, "top1");
        h_barplot(y1, 10, "right1");

        scatterplot(
          x2,
          y2,
          xy2,
          island_code,
          "main2",
          (title = "Penguin Species"),
          (xLabel = "culmen_depth_mm"),
          (yLabel = "culmen_length_mm")
        );
        //#############
        barplot(x2, 10, "top2");
        h_barplot(y2, 10, "right2");

        scatterplot(
          x3,
          y3,
          xy3,
          island_code,
          "main3",
          (title = "Penguin Species"),
          (xLabel = "culmen_depth_mm"),
          (yLabel = "culmen_length_mm")
        );
        //#############
        barplot(x3, 10, "top3");
        h_barplot(y3, 10, "right3");
      }

function tgtb1() {

document.getElementById("table1").classList.toggle("hidden");
document.getElementById("table2").classList.toggle("hidden");
document.getElementById("table3").classList.toggle("hidden");


}

function tgtb2() {

document.getElementById("table2").classList.toggle("hidden");

}
function tgtb3() {

document.getElementById("table3").classList.toggle("hidden");

}

var svg = d3.select("#dataviz")

// legend1
svg.append("circle").attr("cx",200).attr("cy",130).attr("r", 5).style("fill", "#4682b4")
svg.append("circle").attr("cx",200).attr("cy",150).attr("r", 5).style("fill", "#76566f")
svg.append("circle").attr("cx",200).attr("cy",170).attr("r", 5).style("fill", "#a52a2a")
svg.append("text").attr("x", 220).attr("y", 130).text("Torgersen").style("font-size", "15px").style("fill", "#4682b4").attr("alignment-baseline","middle")
svg.append("text").attr("x", 220).attr("y", 150).text("Biscoe").style("font-size", "15px").style("fill", "#76566f").attr("alignment-baseline","middle")
svg.append("text").attr("x", 220).attr("y", 170).text("Dream").style("font-size", "15px").style("fill", "#a52a2a").attr("alignment-baseline","middle")

var svg = d3.select("#dataviz1")

// legend2
svg.append("circle").attr("cx",200).attr("cy",130).attr("r", 5).style("fill", "#4682b4")
svg.append("circle").attr("cx",200).attr("cy",150).attr("r", 5).style("fill", "#76566f")
svg.append("circle").attr("cx",200).attr("cy",170).attr("r", 5).style("fill", "#a52a2a")
svg.append("text").attr("x", 220).attr("y", 130).text("Torgersen").style("font-size", "15px").style("fill", "#4682b4").attr("alignment-baseline","middle")
svg.append("text").attr("x", 220).attr("y", 150).text("Biscoe").style("font-size", "15px").style("fill", "#76566f").attr("alignment-baseline","middle")
svg.append("text").attr("x", 220).attr("y", 170).text("Dream").style("font-size", "15px").style("fill", "#a52a2a").attr("alignment-baseline","middle")

var svg = d3.select("#dataviz2")

// legend3
svg.append("circle").attr("cx",200).attr("cy",130).attr("r", 5).style("fill", "#4682b4")
svg.append("circle").attr("cx",200).attr("cy",150).attr("r", 5).style("fill", "#76566f")
svg.append("circle").attr("cx",200).attr("cy",170).attr("r", 5).style("fill", "#a52a2a")
svg.append("text").attr("x", 220).attr("y", 130).text("Torgersen").style("font-size", "15px").style("fill", "#4682b4").attr("alignment-baseline","middle")
svg.append("text").attr("x", 220).attr("y", 150).text("Biscoe").style("font-size", "15px").style("fill", "#76566f").attr("alignment-baseline","middle")
svg.append("text").attr("x", 220).attr("y", 170).text("Dream").style("font-size", "15px").style("fill", "#a52a2a").attr("alignment-baseline","middle")

// D3. brush attempt
// Draw a circle
// var myCircle = d3.select("#dataviz_brushChange")
//   .append("g")
//   .append("circle")
//     .attr("cx", 150)
//     .attr("cy", 150)
//     .attr("r", 40)
//     .attr("fill", "#69a3b2")

// // Add brushing
// d3.select("#dataviz_brushChange")
//       .call( d3.brush()                 // Add the brush feature using the d3.brush function
//         .extent( [ [0,0], [300,400] ] ) // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area
//         .on("start end", updateChart) // Each time the brush selection changes, trigger the 'updateChart' function
//       )

// // Function that is triggered when brushing is performed
// function updateChart() {

//   // Get the selection coordinate
//   extent = d3.event.selection   // looks like [ [12,11], [132,178]]

//   // Is the circle in the selection?
//   isBrushed = extent[0][0] <= myCircle.attr("cx") && extent[1][0] >= myCircle.attr("cx") && // Check X coordinate
//               extent[0][1] <= myCircle.attr("cy") && extent[1][1] >= myCircle.attr("cy")  // And Y coordinate

//   // Circle is green if in the selection, pink otherwise
//   if (isBrushed){
//     myCircle.transition().duration(200).style("fill", "green")
//   }else{
//     myCircle.transition().duration(200).style("fill", "pink")
//   }
// }


</script>

</div>
</body>
</html>
